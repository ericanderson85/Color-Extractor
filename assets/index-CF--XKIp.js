var ie=Object.defineProperty;var ae=(t,e,n)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var k=(t,e,n)=>(ae(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function m(){}function ee(t){return t()}function F(){return Object.create(null)}function N(t){t.forEach(ee)}function te(t){return typeof t=="function"}function O(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let L;function V(t,e){return t===e?!0:(L||(L=document.createElement("a")),L.href=e,t===L.href)}function ue(t){return Object.keys(t).length===0}function fe(t,...e){if(t==null){for(const r of e)r(void 0);return m}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ne(t,e,n){t.$$.on_destroy.push(fe(e,n))}function x(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function de(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function P(t){return document.createTextNode(t)}function E(){return P(" ")}function re(){return P("")}function oe(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function pe(t){return Array.from(t.childNodes)}function he(t,e){e=""+e,t.data!==e&&(t.data=e)}function j(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function me(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let I;function q(t){I=t}function ge(){if(!I)throw new Error("Function called outside component initialization");return I}function _e(){const t=ge();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const s=me(e,n,{cancelable:r});return o.slice().forEach(c=>{c.call(t,s)}),!s.defaultPrevented}return!0}}const y=[],z=[];let C=[];const G=[],ve=Promise.resolve();let T=!1;function be(){T||(T=!0,ve.then(se))}function R(t){C.push(t)}const H=new Set;let b=0;function se(){if(b!==0)return;const t=I;do{try{for(;b<y.length;){const e=y[b];b++,q(e),$e(e.$$)}}catch(e){throw y.length=0,b=0,e}for(q(null),y.length=0,b=0;z.length;)z.pop()();for(let e=0;e<C.length;e+=1){const n=C[e];H.has(n)||(H.add(n),n())}C.length=0}while(y.length);for(;G.length;)G.pop()();T=!1,H.clear(),q(t)}function $e(t){if(t.fragment!==null){t.update(),N(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}function we(t){const e=[],n=[];C.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),C=e}const S=new Set;let ye;function Z(t,e){t&&t.i&&(S.delete(t),t.i(e))}function K(t,e,n,r){if(t&&t.o){if(S.has(t))return;S.add(t),ye.c.push(()=>{S.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Y(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function X(t){t&&t.c()}function A(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),R(()=>{const s=t.$$.on_mount.map(ee).filter(te);t.$$.on_destroy?t.$$.on_destroy.push(...s):N(s),t.$$.on_mount=[]}),o.forEach(R)}function B(t,e){const n=t.$$;n.fragment!==null&&(we(n.after_update),N(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xe(t,e){t.$$.dirty[0]===-1&&(y.push(t),be(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(t,e,n,r,o,s,c=null,i=[-1]){const l=I;q(t);const a=t.$$={fragment:null,ctx:[],props:s,update:m,not_equal:o,bound:F(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:F(),dirty:i,skip_bound:!1,root:e.target||l.$$.root};c&&c(a.root);let u=!1;if(a.ctx=n?n(t,e.props||{},(f,v,..._)=>{const M=_.length?_[0]:v;return a.ctx&&o(a.ctx[f],a.ctx[f]=M)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](M),u&&xe(t,f)),v}):[],a.update(),u=!0,N(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const f=pe(e.target);a.fragment&&a.fragment.l(f),f.forEach(p)}else a.fragment&&a.fragment.c();e.intro&&Z(t.$$.fragment),A(t,e.target,e.anchor),se()}q(l)}class U{constructor(){k(this,"$$");k(this,"$$set")}$destroy(){B(this,1),this.$destroy=m}$on(e,n){if(!te(n))return m;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!ue(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ce="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ce);const $=[];function ce(t,e=m){let n;const r=new Set;function o(i){if(O(t,i)&&(t=i,n)){const l=!$.length;for(const a of r)a[1](),$.push(a,t);if(l){for(let a=0;a<$.length;a+=2)$[a][0]($[a+1]);$.length=0}}}function s(i){o(i(t))}function c(i,l=m){const a=[i,l];return r.add(a),r.size===1&&(n=e(o,s)||m),i(t),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:o,update:s,subscribe:c}}function Ee(t){let e;return{c(){e=g("div"),e.innerHTML='<label class="upload svelte-uy7le7" for="upload"><svg xmlns="http://www.w3.org/2000/svg" height="72px" viewBox="0 -960 960 960" width="72px" fill="var(--white)"><path d="M180-120q-24 0-42-18t-18-42v-600q0-24 18-42t42-18h600q24 0 42 18t18 42v600q0 24-18 42t-42 18H180Zm0-60h600v-600H180v600Zm56-97h489L578-473 446-302l-93-127-117 152Zm-56 97v-600 600Z"></path></svg> <span>Upload Image</span></label>',d(e,"class","container svelte-uy7le7")},m(n,r){h(n,e,r)},p:m,d(n){n&&p(e)}}}function qe(t){let e,n,r,o,s;return{c(){e=g("div"),n=g("img"),o=E(),s=g("div"),s.innerHTML=`<label for="upload" class="svelte-uy7le7">Upload New Image

    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="var(--white)"><path d="M180-120q-24 0-42-18t-18-42v-600q0-24 18-42t42-18h600q24 0 42 18t18 42v600q0 24-18 42t-42 18H180Zm0-60h600v-600H180v600Zm56-97h489L578-473 446-302l-93-127-117 152Zm-56 97v-600 600Z"></path></svg></label>`,V(n.src,r=t[0])||d(n,"src",r),d(n,"alt","Uploaded file"),d(n,"class","svelte-uy7le7"),d(e,"class","container svelte-uy7le7"),d(s,"class","new-upload svelte-uy7le7")},m(c,i){h(c,e,i),x(e,n),h(c,o,i),h(c,s,i)},p(c,i){i&1&&!V(n.src,r=c[0])&&d(n,"src",r)},d(c){c&&(p(e),p(o),p(s))}}}function Ie(t){let e,n,r,o,s;function c(a,u){return a[0]?qe:Ee}let i=c(t),l=i(t);return{c(){e=g("input"),n=E(),l.c(),r=re(),d(e,"id","upload"),d(e,"type","file"),d(e,"accept","image/*"),e.hidden=!0},m(a,u){h(a,e,u),h(a,n,u),l.m(a,u),h(a,r,u),o||(s=oe(e,"change",t[2]),o=!0)},p(a,[u]){i===(i=c(a))&&l?l.p(a,u):(l.d(1),l=i(a),l&&(l.c(),l.m(r.parentNode,r)))},i:m,o:m,d(a){a&&(p(e),p(n),p(r)),l.d(a),o=!1,s()}}}function Me(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=n,r.readAsDataURL(t)})}function Le(t){const e=new Image;return e.src=t,e}function Se(t,e,n){let r;const o=_e();let s=ce(null);ne(t,s,i=>n(0,r=i));async function c(i){const l=i.target.files[0];if(l){const a=await Me(l);s.set(a);const u=Le(a);u.onload=()=>{o("imageReady",{imageElement:u})}}}return[r,s,c]}class Ne extends U{constructor(e){super(),D(this,e,Se,Ie,O,{})}}function J(t,e,n){const r=t.slice();return r[5]=e[n].color,r[6]=e[n].hex,r}function Q(t){let e,n,r,o=Y(t[0]),s=[];for(let c=0;c<o.length;c+=1)s[c]=W(J(t,o,c));return{c(){e=g("div"),e.innerHTML='<span class="title svelte-q4xa07">Extracted Colors:</span>',n=E(),r=g("div");for(let c=0;c<s.length;c+=1)s[c].c();d(e,"class","title-container svelte-q4xa07"),d(r,"class","colors svelte-q4xa07")},m(c,i){h(c,e,i),h(c,n,i),h(c,r,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,null)},p(c,i){if(i&11){o=Y(c[0]);let l;for(l=0;l<o.length;l+=1){const a=J(c,o,l);s[l]?s[l].p(a,i):(s[l]=W(a),s[l].c(),s[l].m(r,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=o.length}},d(c){c&&(p(e),p(n),p(r)),de(s,c)}}}function Oe(t){let e,n=t[6]+"",r;return{c(){e=g("span"),r=P(n),d(e,"class","svelte-q4xa07")},m(o,s){h(o,e,s),x(e,r)},p(o,s){s&1&&n!==(n=o[6]+"")&&he(r,n)},d(o){o&&p(e)}}}function ke(t){let e;return{c(){e=g("span"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="var(--white)"><path d="M300-200q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H300Zm0-60h440v-560H300v560ZM180-80q-24 0-42-18t-18-42v-620h60v620h500v60H180Zm120-180v-560 560Z"></path></svg>',d(e,"class","svelte-q4xa07")},m(n,r){h(n,e,r)},p:m,d(n){n&&p(e)}}}function W(t){let e,n,r,o;function s(a,u){return a[1]?ke:Oe}let c=s(t),i=c(t);function l(){return t[4](t[6])}return{c(){e=g("div"),i.c(),n=E(),d(e,"class","color-swatch svelte-q4xa07"),j(e,"background-color",t[5])},m(a,u){h(a,e,u),i.m(e,null),x(e,n),r||(o=oe(e,"click",l),r=!0)},p(a,u){t=a,c===(c=s(t))&&i?i.p(t,u):(i.d(1),i=c(t),i&&(i.c(),i.m(e,n))),u&1&&j(e,"background-color",t[5])},d(a){a&&p(e),i.d(),r=!1,o()}}}function He(t){let e,n=t[0].length&&Q(t);return{c(){n&&n.c(),e=re()},m(r,o){n&&n.m(r,o),h(r,e,o)},p(r,[o]){r[0].length?n?n.p(r,o):(n=Q(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:m,o:m,d(r){r&&p(e),n&&n.d(r)}}}function Te(t,e,n){let r,o=ce(!1);ne(t,o,l=>n(1,r=l));let{displayedColorSwatches:s=[]}=e;async function c(l){await navigator.clipboard.writeText(l),o.set(!0),setTimeout(()=>{o.set(!1)},1e3)}const i=l=>c(l);return t.$$set=l=>{"displayedColorSwatches"in l&&n(0,s=l.displayedColorSwatches)},[s,r,o,c,i]}class Re extends U{constructor(e){super(),D(this,e,Te,He,O,{displayedColorSwatches:0})}}function Ze(t){let e,n,r,o,s,c,i;return o=new Ne({}),o.$on("imageReady",t[2]),c=new Re({props:{displayedColorSwatches:t[1]}}),{c(){e=g("main"),n=g("div"),n.innerHTML='<span class="title svelte-10vd7mm"><a href="/" class="svelte-10vd7mm">Color Palette Extractor</a></span> <span class="description svelte-10vd7mm">Get a color palette from an image!</span>',r=E(),X(o.$$.fragment),s=E(),X(c.$$.fragment),d(n,"class","title-container svelte-10vd7mm")},m(l,a){h(l,e,a),x(e,n),x(e,r),A(o,e,null),x(e,s),A(c,e,null),i=!0},p(l,[a]){const u={};a&2&&(u.displayedColorSwatches=l[1]),c.$set(u)},i(l){i||(Z(o.$$.fragment,l),Z(c.$$.fragment,l),i=!0)},o(l){K(o.$$.fragment,l),K(c.$$.fragment,l),i=!1},d(l){l&&p(e),B(o),B(c)}}}const w=32,Ae=85,Be=5;function Pe(t){const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,e.width,e.height).data}function De(t){const e={};for(let n=0;n<t.length;n+=4){const r=t[n],o=t[n+1],s=t[n+2],c=le(r,o,s),i=`${Math.floor(r/w)*w},${Math.floor(o/w)*w},${Math.floor(s/w)*w}`;e[i]=e[i]||{count:0,totalVibrance:0},e[i].count++,e[i].totalVibrance+=c}return e}function Ue(t){return Object.keys(t).map(e=>{const[n,r,o]=e.split(",").map(Number),{count:s,totalVibrance:c}=t[e];return{color:`rgb(${n},${r},${o})`,count:s,vibrance:c/s}})}function Fe(t){const e=[];return t.forEach(n=>{let r=!1;for(let o of e)if(ze(o[0],n)<Ae){o.push(n),r=!0;break}r||e.push([n])}),e}function Ve(t){return t.map(e=>{let n=0,r=0,o=0,s=0;e.forEach(f=>{const[v,_,M]=f.color.replace("rgb(","").replace(")","").split(",").map(Number);n+=v*f.count,r+=_*f.count,o+=M*f.count,s+=f.count});const c=Math.round(n/s),i=Math.round(r/s),l=Math.round(o/s),a=`rgb(${c},${i},${l})`,u=le(c,i,l);return{color:a,count:s,vibrance:u}})}function je(t){return t.sort((e,n)=>{const r=e.vibrance**4*e.count;return n.vibrance**4*n.count-r})}function le(t,e,n){const r=t/255,o=e/255,s=n/255,c=.2126*r+.7152*o+.0722*s,i=Math.max(r,o,s),l=Math.min(r,o,s);return(i===0?0:(i-l)/i)*c**.5*1.5}function ze(t,e){const[n,r,o]=t.color.replace("rgb(","").replace(")","").split(",").map(Number),[s,c,i]=e.color.replace("rgb(","").replace(")","").split(",").map(Number);return Math.sqrt((s-n)**2+(c-r)**2+(i-o)**2)}function Ge(t){let[e,n,r]=t.match(/\d+/g);return`#${[e,n,r].map(o=>{const s=parseInt(o).toString(16);return s.length===1?"0"+s:s}).join("")}`}function Ke(t,e,n){let r=[];function o(c){const i=Pe(c),l=De(i),a=Ue(l),u=Fe(a),f=Ve(u),v=je(f);n(1,r=v.slice(0,Be).map(_=>({color:_.color,hex:Ge(_.color)})))}return[o,r,c=>o(c.detail.imageElement)]}class Ye extends U{constructor(e){super(),D(this,e,Ke,Ze,O,{extractColorsFromImage:0})}get extractColorsFromImage(){return this.$$.ctx[0]}}new Ye({target:document.getElementById("app")});
