var ce=Object.defineProperty;var se=(e,t,n)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var P=(e,t,n)=>(se(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function $(){}function Q(e){return e()}function j(){return Object.create(null)}function z(e){e.forEach(Q)}function W(e){return typeof e=="function"}function ee(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let A;function F(e,t){return e===t?!0:(A||(A=document.createElement("a")),A.href=t,e===A.href)}function le(e){return Object.keys(e).length===0}function ie(e,...t){if(e==null){for(const r of t)r(void 0);return $}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function B(e,t,n){e.$$.on_destroy.push(ie(t,n))}function _(e,t){e.appendChild(t)}function M(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function ue(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function te(e){return document.createTextNode(e)}function L(){return te(" ")}function ne(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ae(e){return Array.from(e.childNodes)}function fe(e,t){t=""+t,e.data!==t&&(e.data=t)}function H(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let U;function N(e){U=e}const x=[],G=[];let k=[];const K=[],de=Promise.resolve();let T=!1;function he(){T||(T=!0,de.then(re))}function q(e){k.push(e)}const D=new Set;let C=0;function re(){if(C!==0)return;const e=U;do{try{for(;C<x.length;){const t=x[C];C++,N(t),pe(t.$$)}}catch(t){throw x.length=0,C=0,t}for(N(null),x.length=0,C=0;G.length;)G.pop()();for(let t=0;t<k.length;t+=1){const n=k[t];D.has(n)||(D.add(n),n())}k.length=0}while(x.length);for(;K.length;)K.pop()();T=!1,D.clear(),N(e)}function pe(e){if(e.fragment!==null){e.update(),z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}function me(e){const t=[],n=[];k.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),k=t}const ge=new Set;function be(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function Y(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function _e(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),q(()=>{const c=e.$$.on_mount.map(Q).filter(W);e.$$.on_destroy?e.$$.on_destroy.push(...c):z(c),e.$$.on_mount=[]}),o.forEach(q)}function ye(e,t){const n=e.$$;n.fragment!==null&&(me(n.after_update),z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&(x.push(e),he(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ve(e,t,n,r,o,c,u=null,s=[-1]){const a=U;N(e);const l=e.$$={fragment:null,ctx:[],props:c,update:$,not_equal:o,bound:j(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:j(),dirty:s,skip_bound:!1,root:t.target||a.$$.root};u&&u(l.root);let p=!1;if(l.ctx=n?n(e,t.props||{},(d,v,...i)=>{const g=i.length?i[0]:v;return l.ctx&&o(l.ctx[d],l.ctx[d]=g)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](g),p&&$e(e,d)),v}):[],l.update(),p=!0,z(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const d=ae(t.target);l.fragment&&l.fragment.l(d),d.forEach(O)}else l.fragment&&l.fragment.c();t.intro&&be(e.$$.fragment),_e(e,t.target,t.anchor),re()}N(a)}class we{constructor(){P(this,"$$");P(this,"$$set")}$destroy(){ye(this,1),this.$destroy=$}$on(t,n){if(!W(n))return $;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!le(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ce="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ce);const E=[];function R(e,t=$){let n;const r=new Set;function o(s){if(ee(e,s)&&(e=s,n)){const a=!E.length;for(const l of r)l[1](),E.push(l,e);if(a){for(let l=0;l<E.length;l+=2)E[l][0](E[l+1]);E.length=0}}}function c(s){o(s(e))}function u(s,a=$){const l=[s,a];return r.add(l),r.size===1&&(n=t(o,c)||$),s(e),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:o,update:c,subscribe:u}}function X(e,t,n){const r=e.slice();return r[10]=t[n].color,r[11]=t[n].hex,r}function Z(e){let t,n,r;return{c(){t=y("div"),n=y("img"),F(n.src,r=e[0])||b(n,"src",r),b(n,"alt","Uploaded"),b(n,"class","svelte-99z2mr"),b(t,"class","image-preview svelte-99z2mr")},m(o,c){M(o,t,c),_(t,n)},p(o,c){c&1&&!F(n.src,r=o[0])&&b(n,"src",r)},d(o){o&&O(t)}}}function Ee(e){let t,n=e[11]+"",r;return{c(){t=y("span"),r=te(n),b(t,"class","svelte-99z2mr")},m(o,c){M(o,t,c),_(t,r)},p(o,c){c&2&&n!==(n=o[11]+"")&&fe(r,n)},d(o){o&&O(t)}}}function Ie(e){let t;return{c(){t=y("span"),t.textContent="content_copy",b(t,"class","material-symbols-outlined svelte-99z2mr")},m(n,r){M(n,t,r)},p:$,d(n){n&&O(t)}}}function J(e){let t,n,r,o;function c(l,p){return l[2]?Ie:Ee}let u=c(e),s=u(e);function a(){return e[8](e[11])}return{c(){t=y("div"),s.c(),n=L(),b(t,"class","color-swatch svelte-99z2mr"),H(t,"background-color",e[10])},m(l,p){M(l,t,p),s.m(t,null),_(t,n),r||(o=ne(t,"click",a),r=!0)},p(l,p){e=l,u===(u=c(e))&&s?s.p(e,p):(s.d(1),s=u(e),s&&(s.c(),s.m(t,n))),p&2&&H(t,"background-color",e[10])},d(l){l&&O(t),s.d(),r=!1,o()}}}function xe(e){let t,n,r,o,c,u,s,a,l,p,d,v,i=e[0]&&Z(e),g=Y(e[1]),h=[];for(let f=0;f<g.length;f+=1)h[f]=J(X(e,g,f));return{c(){t=y("main"),n=y("h1"),n.textContent="Color Extractor",r=L(),o=y("input"),c=L(),i&&i.c(),u=L(),s=y("div"),a=y("h2"),a.textContent="Extracted Colors:",l=L(),p=y("div");for(let f=0;f<h.length;f+=1)h[f].c();b(o,"type","file"),b(o,"accept","image/*"),b(o,"class","file-input svelte-99z2mr"),b(p,"class","colors svelte-99z2mr"),b(s,"class","color-display svelte-99z2mr"),b(t,"class","container svelte-99z2mr")},m(f,w){M(f,t,w),_(t,n),_(t,r),_(t,o),_(t,c),i&&i.m(t,null),_(t,u),_(t,s),_(s,a),_(s,l),_(s,p);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(p,null);d||(v=ne(o,"change",e[6]),d=!0)},p(f,[w]){if(f[0]?i?i.p(f,w):(i=Z(f),i.c(),i.m(t,u)):i&&(i.d(1),i=null),w&134){g=Y(f[1]);let m;for(m=0;m<g.length;m+=1){const S=X(f,g,m);h[m]?h[m].p(S,w):(h[m]=J(S),h[m].c(),h[m].m(p,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=g.length}},i:$,o:$,d(f){f&&O(t),i&&i.d(),ue(h,f),d=!1,v()}}}const I=32,ke=85,Oe=5;function Le(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)})}function Ne(e){const t=new Image;return t.src=e,t}function Me(e){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,t.width,t.height).data}function Se(e){const t={};for(let n=0;n<e.length;n+=4){const r=e[n],o=e[n+1],c=e[n+2],u=oe(r,o,c),s=`${Math.floor(r/I)*I},${Math.floor(o/I)*I},${Math.floor(c/I)*I}`;t[s]=t[s]||{count:0,totalVibrance:0},t[s].count++,t[s].totalVibrance+=u}return t}function Ae(e){return Object.keys(e).map(t=>{const[n,r,o]=t.split(",").map(Number),{count:c,totalVibrance:u}=e[t];return{color:`rgb(${n},${r},${o})`,count:c,vibrance:u/c}})}function ze(e){const t=[];return e.forEach(n=>{let r=!1;for(let o of t)if(De(o[0],n)<ke){o.push(n),r=!0;break}r||t.push([n])}),t}function Pe(e){return e.map(t=>{let n=0,r=0,o=0,c=0;t.forEach(d=>{const[v,i,g]=d.color.replace("rgb(","").replace(")","").split(",").map(Number);n+=v*d.count,r+=i*d.count,o+=g*d.count,c+=d.count});const u=Math.round(n/c),s=Math.round(r/c),a=Math.round(o/c),l=`rgb(${u},${s},${a})`,p=oe(u,s,a);return{color:l,count:c,vibrance:p}})}function Be(e){return e.sort((t,n)=>{const r=t.vibrance**4*t.count;return n.vibrance**4*n.count-r})}function oe(e,t,n){const r=e/255,o=t/255,c=n/255,u=.2126*r+.7152*o+.0722*c,s=Math.max(r,o,c),a=Math.min(r,o,c);return(s===0?0:(s-a)/s)*u**.5*1.5}function De(e,t){const[n,r,o]=e.color.replace("rgb(","").replace(")","").split(",").map(Number),[c,u,s]=t.color.replace("rgb(","").replace(")","").split(",").map(Number);return Math.sqrt((c-n)**2+(u-r)**2+(s-o)**2)}function Re(e){let[t,n,r]=e.match(/\d+/g);return`#${[t,n,r].map(o=>{const c=parseInt(o).toString(16);return c.length===1?"0"+c:c}).join("")}`}function Te(e,t,n){let r,o,c,u=R(null);B(e,u,i=>n(0,r=i));let s=R([]);B(e,s,i=>n(1,o=i));let a=R(!1);B(e,a,i=>n(2,c=i));async function l(i){const g=i.target.files[0];if(g){const h=await Le(g);u.set(h);const f=Ne(h);f.onload=()=>p(f)}}function p(i){const g=Me(i),h=Se(g),f=Ae(h),w=ze(f),m=Pe(w),S=Be(m);s.set(S.slice(0,Oe).map(V=>({color:V.color,hex:Re(V.color)})))}async function d(i){await navigator.clipboard.writeText(i),a.set(!0),setTimeout(()=>{a.set(!1)},1e3)}return[r,o,c,u,s,a,l,d,i=>d(i)]}class qe extends we{constructor(t){super(),ve(this,t,Te,xe,ee,{})}}new qe({target:document.getElementById("app")});
